<div class="profile-page" *ngIf="editableForm">
  <form *ngIf="editableForm" [formGroup]="editableForm">
  <div class="profile-header cyber-card">
      <div class="profile-avatar">
        <img [src]="avatarUrl" alt="Avatar">
        <input type="file" (change)="onFileSelected($event)" accept="image/*" hidden #fileInput>
        <button class="change-avatar-btn" type="button" (click)="fileInput.click()">
          <i>üì∑</i>
        </button>
      </div>
      <div class="profile-info">
        <h1>{{ editableForm.get('firstName')?.value }} {{ editableForm.get('lastName')?.value }}</h1>
        <p class="position">{{ editableForm.get('position')?.value }} ¬∑ {{ editableForm.get('department')?.value }}</p>
        <p class="join-date">–í –∫–æ–º–∞–Ω–¥–µ —Å {{ formatDate(editableForm.get('joinDate')?.value, 'd MMMM y', 'en-EN') }}</p>
      </div>
    </div>

    <div class="profile-content">
      <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
      <div class="cyber-card">
        <h2>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
        <div class="form-grid">
          <div class="form-group">
            <label>–ò–º—è</label>
            <input type="text" class="cyber-input" formControlName="firstName">
          </div>
          <div class="form-group">
            <label>–§–∞–º–∏–ª–∏—è</label>
            <input type="text" class="cyber-input" formControlName="lastName">
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" class="cyber-input" formControlName="email">
          </div>
          <div class="form-group">
            <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
            <input type="tel" class="cyber-input" formControlName="phone">
          </div>
          <div class="form-group">
            <label>–î–æ–ª–∂–Ω–æ—Å—Ç—å</label>
            <input type="text" class="cyber-input" formControlName="position">
          </div>
          <div class="form-group">
            <label>–û—Ç–¥–µ–ª</label>
            <input type="text" class="cyber-input" formControlName="department">
          </div>
        </div>
      </div>

      <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
      <div class="cyber-card">
        <h2>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
        <div class="form-grid">
          <div class="form-group">
            <label>–õ–æ–∫–∞—Ü–∏—è</label>
            <input type="text" class="cyber-input" formControlName="location">
          </div>
          <div class="form-group">
            <label>–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å</label>
            <input type="text" class="cyber-input" formControlName="timezone">
          </div>
          <div class="form-group full-width">
            <label>–û —Å–µ–±–µ</label>
            <textarea class="cyber-input" rows="4" formControlName="bio"></textarea>
          </div>
        </div>
      </div>

      <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
      <div [formGroup]="notificationsGroup">
        <div class="notifications-settings">
          <label class="cyber-switch">
            <input type="checkbox" formControlName="email">
            <span class="switch-slider"></span>
            <span class="switch-label">Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
          </label>
          <label class="cyber-switch">
            <input type="checkbox" formControlName="push">
            <span class="switch-slider"></span>
            <span class="switch-label">Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
          </label>
          <label class="cyber-switch">
            <input type="checkbox" formControlName="telegram">
            <span class="switch-slider"></span>
            <span class="switch-label">Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
          </label>
        </div>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
      <div class="profile-actions">
        <button class="cyber-button" type="button" (click)="cancelChanges()">–û—Ç–º–µ–Ω–∏—Ç—å</button>
        <button class="cyber-button primary" type="button" (click)="saveChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
      </div>
    </div>
  </form>

  <!-- üëá –û—Ç–¥–µ–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è -->
  <form [formGroup]="passwordForm" (ngSubmit)="submitPasswordChange()" class="cyber-card password-change-form">
    <h2>–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</h2>
    <div class="form-grid">
      <div class="form-group">
        <label>–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
        <input type="password" class="cyber-input" formControlName="oldPassword">
      </div>
      <div class="form-group">
        <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
        <input type="password" class="cyber-input" formControlName="newPassword">
      </div>
      <div class="form-group">
        <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
        <input type="password" class="cyber-input" formControlName="confirmPassword">
        <div *ngIf="passwordForm.errors?.['notMatch']" class="error">–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç</div>
      </div>
    </div>
    <button type="submit" class="cyber-button danger" [disabled]="passwordForm.invalid">–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
  </form>


</div>
